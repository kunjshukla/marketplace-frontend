(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[453],{977:function(e,t,s){Promise.resolve().then(s.bind(s,1068))},1068:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l},dynamic:function(){return c}});var r=s(7437),a=s(2265),n=s(1169),i=s(4438);let c="force-dynamic";function o(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),[s,c]=(0,a.useState)(!0),[o,l]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{try{let s=t.get("code");if(t.get("error")){l("Authentication failed. Please try again."),setTimeout(()=>{e.push("/")},3e3);return}if(s)try{let t=await i.E.googleLogin(s);if(t.success&&t.data){let{access_token:s,refresh_token:r,user:a}=t.data;i.E.setToken(s),localStorage.setItem("refresh_token",r),localStorage.setItem("user_data",JSON.stringify(a)),e.push("/")}else l("Authentication failed. Please try again."),setTimeout(()=>{e.push("/")},3e3)}catch(t){console.error("Authentication error:",t),l(t.message||"Authentication failed"),setTimeout(()=>{e.push("/")},3e3)}else l("No authorization code received"),setTimeout(()=>{e.push("/")},3e3)}catch(t){console.error("Callback handling error:",t),l("An error occurred during authentication"),setTimeout(()=>{e.push("/")},3e3)}finally{c(!1)}})()},[t,e]),(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8",children:s?(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Completing Sign In..."}),(0,r.jsx)("p",{className:"text-gray-600",children:"Please wait while we finish setting up your account."})]}):o?(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-red-500 text-4xl mb-4",children:"⚠️"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Authentication Error"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:o}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Redirecting to home page..."})]}):(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-green-500 text-4xl mb-4",children:"✅"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Sign In Successful!"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Redirecting to your dashboard..."})]})})})}function l(){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Loading..."}),(0,r.jsx)("p",{className:"text-gray-600",children:"Please wait while we process your request."})]})})}),children:(0,r.jsx)(o,{})})}},4438:function(e,t,s){"use strict";s.d(t,{E:function(){return a}});class r{loadToken(){this.token=localStorage.getItem("auth_token")}setToken(e){this.token=e,e?localStorage.setItem("auth_token",e):localStorage.removeItem("auth_token")}getHeaders(){let e={"Content-Type":"application/json"};return this.token&&(e.Authorization="Bearer ".concat(this.token)),e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(this.baseURL).concat(e),r=this.getHeaders();try{let e=await fetch(s,{...t,headers:{...r,...t.headers}});if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.detail||"HTTP error! status: ".concat(e.status))}return e.json()}catch(e){throw console.error("API request failed:",e),e}}async login(e,t){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async googleLogin(e){return this.request("/auth/google/callback",{method:"POST",body:JSON.stringify({code:e})})}async logout(){return this.request("/auth/logout",{method:"POST"})}async getCurrentUser(){return this.request("/auth/me")}async getNFTs(e){let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[s,r]=e;null!=r&&t.append(s,r.toString())}),this.request("/nfts?".concat(t.toString()))}async getNFTById(e){return this.request("/nfts/".concat(e))}async createNFT(e){return this.request("/nfts",{method:"POST",body:JSON.stringify(e)})}async updateNFT(e,t){return this.request("/nfts/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteNFT(e){return this.request("/nfts/".concat(e),{method:"DELETE"})}async purchaseNFT(e,t,s){let r="INR"===t&&s?{form_data:s}:void 0;return this.request("INR"===t?"/purchase/inr/".concat(e):"/purchase/usd/".concat(e),{method:"POST",body:r?JSON.stringify(r):void 0})}async confirmPayment(e){return this.request("/purchase/confirm",{method:"POST",body:JSON.stringify({transaction_id:e})})}async getPurchaseHistory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return this.request("/purchase/history?page=".concat(e,"&limit=").concat(t))}async downloadCertificate(e){let t="".concat(this.baseURL,"/purchase/").concat(e,"/certificate"),s=this.getHeaders(),r=await fetch(t,{headers:s});if(!r.ok)throw Error("Failed to download certificate");return r.blob()}async getAdminStats(){return this.request("/admin/stats")}async getAllUsers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return this.request("/admin/users?page=".concat(e,"&limit=").concat(t))}async verifyUser(e){return this.request("/admin/users/".concat(e,"/verify"),{method:"POST"})}async updateUserRole(e,t){return this.request("/admin/users/".concat(e,"/role"),{method:"PUT",body:JSON.stringify({role:t})})}async getAllTransactions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return this.request("/admin/transactions?page=".concat(e,"&limit=").concat(t))}async getAnalytics(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"30d";return this.request("/analytics?period=".concat(e))}async trackEvent(e,t){return this.request("/analytics/track",{method:"POST",body:JSON.stringify({event:e,properties:t})})}async healthCheck(){return this.request("/health")}constructor(e="https://web-production-be809.up.railway.app/"){this.token=null,this.baseURL=e,this.loadToken()}}let a=new r}},function(e){e.O(0,[971,23,744],function(){return e(e.s=977)}),_N_E=e.O()}]);